---
sidebar_label: Functional Description
---

# Functional Description for the tag XL


## General Overview and Information*

The Truvami tag XL device is a powerful and flexible GNSS tracking device that integrates a multi-standard GNSS scanner 
and passive Wi-Fi MAC address scanner with Bluetooth 5.2 connectivity and sensors such as accelerometer into one 
compact device. The IP65-rated housing with different mounting options prepares the device for operation in a harsh 
industrial environment.

## Device Initialization and Joining

``` mermaid
flowchart LR
    A(Firmware and <br/>Almanac Update) --> B(Join LoRaWAN<br/>Network)
    B -->  C(Track Assets)
```

This overview shows the general the procedure at start-up. In the first step indicated by a short tone.

After this has passed, the device starts to join to the LoRaWAN network, playing a long tone on each join trial. 
If a network connection is established, the device will play a melody and start to track the asset. 

If a join trial fails, the device will retry the join with a join back-off strategy. The device will start to retry at  
different intervals. This approach is split into 5 possible cases. In each case, the device will retry to join, 
according to *Retry Timeout*. If a connection could not be established during the specific *Case Timeout* time, 
the device will change the mode to the next higher one, except the last mode 5. 

``` mermaid
flowchart LR
    A(Mode 1) --> B(Mode 2)
    B -->  C(Mode 3)
    C --> D(Mode 4)
    D --> E(Mode 5)
    E --> E
```


| Case   | Retry Timeout | Case Timeout* |
|--------|---------------|---------------|
| Mode 1 | 1 minute      | 15 minutes    |
| Mode 2 | 15 minute     | 45 mintues    |
| Mode 3 | Hour          | 24 hours      |
| Mode 4 | Day           | 7 days        |
| Mode 5 | Week          | -             |

:::important
    If the device reaches the case *Mode 5*, it will stay in this case until a LoRawan connection is established. 
    Hence, there are no further interval or timeout updates. The device will weekly try to join the network. 
    :::

## Asset Tracking

The device will track the location periodically after a **steady** time. If the device is set in motion, it will use a 
shorter **movement** time to track the asset periodically. If the motion stops, the device will use the steady time again.
In between those periodically tracking intervals, the device will enter the sleep mode which is the lowest possible 
power mode.

``` mermaid
stateDiagram-v2
    s1: Sleep Mode
    s2: Moving
    s3: Track fast
    s4: Track slow
    s1 --> s2: Movemnt
    s2 --> s3: Movement Timer 
    s2 --> s1: Static
    s3 --> s2
    s4 --> s1
    s1 --> s4: Steady Timer
```

<br> </br>

:::important
All mentioned device tracking time periods are adjustable. 
:::
[comment]: <> (Consider the <<device_param,documentation>>.)


The device tracks the location with [Wi-Fi](https://en.wikipedia.org/wiki/Wi-Fi) and 
[GNSS](https://en.wikipedia.org/wiki/GNSS_applications) scans and sends the collected data through a gateway to a 
backend sever. The location is generated by GNSS data and if not available/valid then Wi-Fi data. The server displays 
the location data on the [Semtech LoRa Cloud website](https://atk.loracloud.com/device-tracking). 

## Device Reset

To reset the device, use a magnet and hold it next to the device at the marked spot.

## Device Configurations and Updates

### Device Parameters

All device settings are fully configurable over the [Semtech LoRa Cloud website](https://atk.loracloud.com/device-tracking).

[comment]: <> (!!! note)
:::note
    The device must be joined to the LoRaWAN network in order to change the device settings.
    :::


### Almanac Update

_still in progress, more information will follow_


<br></br>

:::warning Support 
<br></br>
For support, please submit a ticket. We will provide support as promptly as possible. <br></br>
 <br></br>

[**Click here to open a new ticket**](https://truvami.com/service-request/)
